---
layout: post
title: Typecho关闭评论的方法
date: 2022-06-10 09:19:00
category: 软件应用
permalink: /796.html
tags:
- typecho
- 问题
- 个人
- 数据库
- 内容
- 系统
- 文件
- 功能
- 备案
- 站长
- 类型
- 静态
- hugo
- 博客
- 后台
- 关闭
- 评论
- 修改
---

<!--markdown-->个人备案的站长，提交的备案类型一般为静态非交互式，网站不包含可供交互的功能，例如评论或留言板。用hugo这样的静态博客自然是没问题，如果你使用的是Typecho或Wordpress之类的博客系统，可能需要关闭可以交互的功能。

Wordpresss中，可以直接在后台设置关闭评论，在Typecho中，后台却没有这个功能，这时候在**不修改核心代码**的前提下，利用后台的`设置-评论-在文章发布x天以后自动关闭评论`这个功能可以变通的实现关闭评论。

> 提示：网上搜寻到的方法是设置为1天，这样发布文章1天后，评论会自动关闭。为了解决这1天的延迟问题，还需要做一下修改。

### 1. 修改数据库
连接typecho数据库，找到`typecho_options`表，修改其中的`commentsPostTimeout`记录中`value`字段为1（意思为在文章发布1秒后自动关闭评论）

### 2. 关闭评论相关组件
接着找到主题所在的文件夹，在需要隐藏的地方加上

```php
<?php if($this->allow('comment')): ?>
需要隐藏的内容
<?php endif; ?>
```

保存即可。