---
layout: post
title: å¦‚ä½•ä»discuz6.0è¿ç§»è‡³blogger(é€šè¿‡wordpressä¸­è½¬)
date: 2022-06-28 12:36:00
category: è½¯ä»¶åº”ç”¨
permalink: /802.html
tags:
- discuz
- wordpress
- blogger
- å¤‡æ¡ˆ
- mysql
---

ç”±äºä¹‹å‰çš„ç½‘ç«™åŸŸåä¸ºä¸ªäººå¤‡æ¡ˆï¼Œæ ¹æ®è§„å®šï¼Œä¸ªäººå¤‡æ¡ˆä¸èƒ½æ”¾ç½®è®ºå›å’Œåšå®¢ï¼š

> ä¸ªäººå¤‡æ¡ˆä¸èƒ½åšåšå®¢ï¼Œä¸èƒ½å‡ºç°â€œåšå®¢â€å­—çœ¼ï¼Œä¸èƒ½æœ‰â€è¯„è®ºâ€œã€â€œç™»å½•â€ç­‰åŠŸèƒ½ã€‚
> ä¸ªäººå¤‡æ¡ˆç½‘ç«™åå¿…é¡»åŒ…å«å¤‡æ¡ˆæ—¶å¡«å†™çš„ç½‘ç«™åï¼Œå¿…é¡»å®Œæ•´ï¼Œå»ºè®®åè·Ÿç½‘ç«™å¤‡æ¡ˆåã€‚
> ä¸»ä½“ä¸‹æ‰€æœ‰å¤‡æ¡ˆåŸŸåå¿…é¡»è§£æåˆ°ä¸»ä½“æ‰€åœ¨çš„æœåŠ¡å•†çš„æœåŠ¡å™¨IPã€‚
> ç½‘ç«™é¦–é¡µåº•éƒ¨å¿…é¡»æ·»åŠ å¤‡æ¡ˆå·åŠç‰ˆæƒæ‰€æœ‰ã€‚
> æ§åˆ¶é¡µé¢å†…å®¹ï¼Œä¸è¦å‡ºç°è¿æ³•å…³é”®è¯ã€‚
> åŸŸåæŒæœ‰äººä¸å¤‡æ¡ˆä¸»ä½“äººä¿¡æ¯ä¸€è‡´ã€‚

ä¹Ÿå› æ­¤ï¼Œä¸ºäº†æ»¡è¶³ä¸ªäººå¤‡æ¡ˆçš„æ¡ä»¶ï¼Œå†³å®šæŠŠ[ä¸‰æ€å±‹ç¤¾åŒº](https://3sv.ktsee.net)å’Œ[çœ‹å¤©åšå®¢](https://hi.ktsee.net)è¿èµ°ï¼Œæ‰€ä»¥æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚

æœ¬æ¥æ²¡æ‰“ç®—å†™è¿™ç¯‡æ–‡ç« ï¼Œè¿™æ ·çš„ç»å†ä¼°è®¡æ²¡æœ‰å¤šå°‘äººä¼šæœ‰â€”â€”æˆ‘ä¹ æƒ¯äºç”¨æ¯”è¾ƒå¤è€çš„discuz6.0ï¼Œçœ‹äº†ä¸‹ç›®å‰ç½‘ç»œä¸Šå·²ç»æ²¡æœ‰äº†ç›¸å…³çš„èµ„æ–™ï¼Œåªèƒ½è‡ªå·±åŠ¨æ‰‹å¤„ç†äº†ã€‚æœ¬æ–‡å…ˆä»‹ç»ä¸€ä¸‹å¦‚ä½•ä»discuz6.0è½¬å…¥blogger

å¤„ç†discuzè¿ç§»ä¸»è¦æ€è·¯æ˜¯ï¼Œä»æ•°æ®åº“ä¸­å¯¼å‡ºç¬¦åˆwordpressæ ¼å¼çš„csvæ–‡ä»¶ï¼Œå¯¼å…¥wordpressä¸­è½¬ï¼Œç„¶åå†é€šè¿‡wordpressçš„æ’ä»¶ï¼Œå¯¼å…¥è‡³blogger

## å‡†å¤‡å·¥ä½œ
å®‰è£…wordpressï¼Œå¹¶å®‰è£…[really-simple-csv-importer](https://wordpress.org/plugins/really-simple-csv-importer/)æ’ä»¶å’Œ[export-to-blogger](https://wordpress.org/plugins/export-to-blogger/)æ’ä»¶

æ¥ç€å¦‚æœdiscuzæ‰€åœ¨çš„mysqlç‰ˆæœ¬æ˜¯5.xï¼Œéœ€è¦å‡†å¤‡mysql 8.0åº“ï¼Œå¹¶å°†discuzå¯¼å…¥æ–°åº“

## æ•°æ®æ•´ç†

æ‰§è¡Œsqlå¯¹discuzçš„cdb_postsè¡¨è¿›è¡ŒæŸ¥è¯¢ï¼Œå¯¼å‡ºæ–°è¡¨
```sql
SELECT 
p.tid post_id
,CONCAT('thread-',p.tid,'-1-1') post_name
,p.author post_author
,FROM_UNIXTIME(p.dateline) post_date
,'post' post_type
,'publish' post_status
,p.`subject` post_title
,REPLACE(REPLACE(p.message, char(13), '<br />'), char(10), '<br />') post_content
,f.`name` post_category
,'' post_tags
,useip custom_field
FROM cdb_posts p
LEFT JOIN cdb_forums f ON f.fid = p.fid
WHERE p.first = 1 AND invisible = 0 AND  p.fid IN (28,24,27,25,17,16,12,99,18,26,96)
```

å¯¹discuzæ–‡ç« ä¸­çš„ubbæ ‡ç­¾é€šè¿‡mysqlçš„REGEXP_REPLACEæ­£åˆ™æ›¿æ¢å‡½æ•°ï¼Œè½¬ä¸ºhtmlæ ‡ç­¾
è¿™ä¸€æ­¥éœ€è¦åœ¨mysql8.0åº“ä¸­è¿›è¡Œ
```sql
-- æµ‹è¯•è¯­å¥
SELECT post_content,
REGEXP_REPLACE(post_content,'(\\[img\\])(.*?)(\\[/img\\])','<img src="$2" />') post_content2
FROM cdb_posts
WHERE post_content like '%[img%';

-- å®é™…æ›¿æ¢ubbç¬¦å·
UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[url\\])(.*?)(\\[/url\\])','<a href="$2" target="_blank">$2</a>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[url=(.*?)\\])(.*?)(\\[/url\\])','<a href="$2" target="_blank">$3</a>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[img\\])(.*?)(\\[/img\\])','<img src="$2" />');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[img=(.*?),(.*?)\\])(.*?)(\\[/img\\])','<img width="$2" height="$3" src="$4" />');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[quote\\])(.*?)(\\[/quote\\])','<quote>$2</quote>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[color=(.*?)\\])(.*?)(\\[/color\\])','$3');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[size=(.*?)\\])(.*?)(\\[/size\\])','$3');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[font=(.*?)\\])(.*?)(\\[/font\\])','$3');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[align=(.*?)\\])(.*?)(\\[/align\\])','<p align="$2">$3</p>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[b\\])(.*?)(\\[/b\\])','<strong>$2</strong>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[i\\])(.*?)(\\[/i\\])','<i>$2</i>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[u\\])(.*?)(\\[/u\\])','<u>$2</u>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[list\\])(.*?)(\\[/list\\])','<ul>$2</ul>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[list=1\\])(.*?)(\\[/list\\])','<ul type="1" style="list-style-type: decimal">$2</ul>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[\\*\\])','<li>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[free\\])(.*?)(\\[/free\\])','<div class="free">$2</div>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[code\\])(.*?)(\\[/code\\])','<pre><code>$2</code><pre>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[hide\\])(.*?)(\\[/hide\\])','<div>æ­¤éƒ¨åˆ†å†…å®¹æœªé€šè¿‡å®¡æ ¸å·²ç§»é™¤</div>');

UPDATE cdb_posts
SET post_content = REGEXP_REPLACE(post_content,'(\\[hide=(.*?)\\])(.*?)(\\[/hide\\])','<div>æ­¤éƒ¨åˆ†å†…å®¹æœªé€šè¿‡å®¡æ ¸å·²ç§»é™¤</div>');
```

å°†å¤„ç†åçš„cdb_postsè¡¨å¯¼å‡ºä¸ºcsv

## å¯¼å…¥wordpressä¸­è½¬

å°†ä¸Šä¸€æ­¥ä¸­å¯¼å‡ºçš„csvæ–‡ä»¶ï¼Œé€šè¿‡really-simple-csv-importeræ’ä»¶å¯¼å…¥wordpress

æ¥ç€ä½¿ç”¨export-to-bloggeræ’ä»¶å¯¼å‡ºé€‚ç”¨äºbloggerçš„xmlæ–‡ä»¶

## å¯¼å…¥blogger

å°†ä¸Šä¸€æ­¥ä¸­å¯¼å‡ºçš„xmlæ–‡ä»¶ï¼Œä»bloggeråå°å¯¼å…¥ã€‚

å¥½äº†ï¼Œå»å–æ¯å’–å•¡å§ğŸ˜„